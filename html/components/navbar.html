<!-- Navbar Component -->
<header class="bg-white shadow-md sticky top-0 z-50 w-full">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-2xl font-extrabold tracking-wide text-blue-700">KapdaForEveryone</h1>

    <div class="flex items-center relative">
      <!-- Mobile Menu Toggle -->
      <div class="md:hidden">
        <button
          id="menu-toggle"
          class="text-3xl text-blue-700 hover:text-blue-900 focus:outline-none transition"
          aria-label="Open menu"
          aria-controls="menu"
          aria-expanded="false">
          <span id="toggle-icon" aria-hidden="true">☰</span>
        </button>
      </div>

      <nav
        id="menu"
        role="navigation"
        aria-label="Main"
        class="hidden md:flex md:items-center flex-col md:flex-row gap-4 md:gap-6 absolute right-0 top-14 w-64 text-base bg-white/90 backdrop-blur-md md:bg-transparent md:static px-6 py-4 md:p-0 rounded-2xl md:rounded-none shadow-2xl md:shadow-none transition-all duration-300 ease-in-out z-50 md:border-none text-left space-y-3 drop-shadow-xl">
        <a href="home.html" class="text-gray-700 hover:text-blue-700 hover:bg-blue-100 hover:shadow-md hover:scale-105 px-3 py-1 transition duration-200 font-medium tracking-wide rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-white">Home</a>
        <a href="about.html" class="text-gray-700 hover:text-blue-700 hover:bg-blue-100 hover:shadow-md hover:scale-105 px-3 py-1 transition duration-200 font-medium tracking-wide rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-white">About</a>
        <a href="portfolio.html" class="text-gray-700 hover:text-blue-700 hover:bg-blue-100 hover:shadow-md hover:scale-105 px-3 py-1 transition duration-200 font-medium tracking-wide rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-white">Portfolio</a>
        <a href="contact.html" class="text-gray-700 hover:text-blue-700 hover:bg-blue-100 hover:shadow-md hover:scale-105 px-3 py-1 transition duration-200 font-medium tracking-wide rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-white">Contact</a>
      </nav>
    </div>
  </div>
</header>

<style>
@keyframes slideDown {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}
#menu:not(.hidden) { animation: slideDown 0.25s ease-out; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  #menu:not(.hidden) { animation: none !important; }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const toggleBtn = document.getElementById("menu-toggle");
  const toggleIcon = document.getElementById("toggle-icon");
  const menu = document.getElementById("menu");

  if (!toggleBtn || !menu) return;

  const setExpanded = (val) => toggleBtn.setAttribute("aria-expanded", String(val));
  const open = () => { menu.classList.remove("hidden"); setExpanded(true); if (toggleIcon) toggleIcon.textContent = "✕"; };
  const close = () => { menu.classList.add("hidden"); setExpanded(false); if (toggleIcon) toggleIcon.textContent = "☰"; };

  // Toggle click
  toggleBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    if (menu.classList.contains("hidden")) open(); else close();
  });

  // Outside click closes on mobile
  document.addEventListener("click", (e) => {
    if (!menu.contains(e.target) && !toggleBtn.contains(e.target)) {
      if (!menu.classList.contains("hidden")) { close(); toggleBtn.focus(); }
    }
  });

  // Close on Escape
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !menu.classList.contains("hidden")) {
      close();
      toggleBtn.focus();
    }
  });

  // Keep sane on resize: show on desktop, manage state on mobile
  const mq = window.matchMedia("(min-width: 768px)");
  const handle = () => {
    if (mq.matches) {
      // Desktop: ensure menu visible; button considered collapsed
      menu.classList.remove("hidden");
      setExpanded(false);
      if (toggleIcon) toggleIcon.textContent = "☰";
    } else {
      // Mobile: keep aria in sync with visibility
      setExpanded(!menu.classList.contains("hidden"));
    }
  };
  if (mq.addEventListener) mq.addEventListener("change", handle); else mq.addListener(handle);
  handle();
});
</script>